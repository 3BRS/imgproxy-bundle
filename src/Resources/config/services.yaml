services:
    _defaults:
        autowire: true
        autoconfigure: true
        public: false

    # URL Builder
    ThreeBRS\ImgproxyBundle\Imagine\ImgproxyUrlBuilder:
        arguments:
            $baseUrl: '%threebrs_imgproxy.base_url%'
            $sourceBaseUrl: '%threebrs_imgproxy.source_base_url%'
            $sourcePrefix: '%threebrs_imgproxy.source_prefix%'
            $key: '%threebrs_imgproxy.key%'
            $salt: '%threebrs_imgproxy.salt%'

    # URL Builder Interface Alias
    ThreeBRS\ImgproxyBundle\Imagine\ImgproxyUrlBuilderInterface:
        alias: ThreeBRS\ImgproxyBundle\Imagine\ImgproxyUrlBuilder

    # Filter Config Converter
    ThreeBRS\ImgproxyBundle\Imagine\Filter\FilterConfigConverter:
        arguments:
            $filterConfig: '@liip_imagine.filter.configuration'

    # Filter Config Converter Interface Alias
    ThreeBRS\ImgproxyBundle\Imagine\Filter\FilterConfigConverterInterface:
        alias: ThreeBRS\ImgproxyBundle\Imagine\Filter\FilterConfigConverter

    # Named alias for filter converter (for easier service access in tests)
    threebrs_imgproxy.filter_converter:
        alias: ThreeBRS\ImgproxyBundle\Imagine\Filter\FilterConfigConverter
        public: true

    # Cache Resolver
    ThreeBRS\ImgproxyBundle\Imagine\Cache\Resolver\ImgproxyCacheResolver:
        tags:
            - { name: 'liip_imagine.cache.resolver', resolver: 'imgproxy' }
